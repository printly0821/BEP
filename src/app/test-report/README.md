# ì œì‘ ì˜ë¢°ì„œ API í…ŒìŠ¤íŠ¸ ì‹œìŠ¤í…œ

ì´ ë””ë ‰í† ë¦¬ëŠ” API ê¸°ë°˜ ë™ì  ë¦¬í¬íŠ¸ ìƒì„± ì‹œìŠ¤í…œì˜ í…ŒìŠ¤íŠ¸ êµ¬í˜„ì…ë‹ˆë‹¤.

## ğŸ“‹ ê°œìš”

ì™¸ë¶€ JSON ë°ì´í„°ë¥¼ APIë¡œ ë°›ì•„ì„œ ë™ì ìœ¼ë¡œ ì œì‘ ì˜ë¢°ì„œ ë¦¬í¬íŠ¸ë¥¼ ìƒì„±í•˜ê³  PDFë¡œ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser   â”‚â”€â”€â”€â”€â”€â–¶â”‚  Next.js API â”‚â”€â”€â”€â”€â”€â–¶â”‚  Mock Database  â”‚
â”‚             â”‚â—€â”€â”€â”€â”€â”€â”‚   Routes     â”‚â—€â”€â”€â”€â”€â”€â”‚  (job-orders)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  JobOrderReportView (React Component)   â”‚
â”‚  - ë™ì  ë°ì´í„° ë Œë”ë§                      â”‚
â”‚  - ì‹¤ì‹œê°„ ë°”ì½”ë“œ/QRì½”ë“œ ìƒì„±               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PDF Generator (html2canvas + jsPDF)    â”‚
â”‚  - A4 í¬ê¸° PDF ìƒì„±                       â”‚
â”‚  - ë‹¤ì¤‘ í˜ì´ì§€ ì§€ì›                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ íŒŒì¼ êµ¬ì¡°

```
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ job-orders/
â”‚   â”‚       â”œâ”€â”€ route.ts              # GET /api/job-orders (ëª©ë¡)
â”‚   â”‚       â””â”€â”€ [id]/
â”‚   â”‚           â””â”€â”€ route.ts          # GET /api/job-orders/:id (ìƒì„¸)
â”‚   â””â”€â”€ test-report/
â”‚       â”œâ”€â”€ page.tsx                  # ë©”ì¸ í˜ì´ì§€
â”‚       â”œâ”€â”€ components/
â”‚       â”‚   â””â”€â”€ JobOrderReportView.tsx # ë¦¬í¬íŠ¸ ì»´í¬ë„ŒíŠ¸
â”‚       â””â”€â”€ README.md                 # ì´ íŒŒì¼
â””â”€â”€ types/
    â””â”€â”€ job-order.ts                  # TypeScript íƒ€ì… ì •ì˜
```

## ğŸ”Œ API ëª…ì„¸

### 1. ì œì‘ ì˜ë¢°ì„œ ëª©ë¡ ì¡°íšŒ

```http
GET /api/job-orders
```

**ì‘ë‹µ ì˜ˆì‹œ:**
```json
{
  "success": true,
  "data": [
    {
      "id": "1",
      "documentNumber": "202510-BIZ-00431_00",
      "orderNumber": "8360443",
      "clientName": "BIZ",
      "orderDate": "2025-10-02",
      "productName": "2ë‹¨ì ‘ì§€ì¹´ë“œ"
    }
  ],
  "total": 3
}
```

### 2. ì œì‘ ì˜ë¢°ì„œ ìƒì„¸ ì¡°íšŒ

```http
GET /api/job-orders/:id
```

**ì‘ë‹µ ì˜ˆì‹œ:**
```json
{
  "success": true,
  "data": {
    "documentNumber": "202510-BIZ-00431_00",
    "orderDate": "2025-10-02",
    "clientName": "BIZ",
    "orderNumber": "8360443",
    "ordererName": "ìµœì •í¬",
    "deliveryDate": "2025-10-15",
    "deliveryMethod": "íƒë°°",
    "itemCount": "1 / 1",
    "recipientName": "ìµœì •í¬",
    "deliveryMemo": "ë¶€ì¬ì‹œ ì§‘ì•ì— ë†”ì£¼ì„¸ìš”.",
    "productName": "2ë‹¨ì ‘ì§€ì¹´ë“œ",
    "companyProductName": "2ë‹¨ ì—½ì„œì¹´ë“œ-ì ‘ì´ì‹ ì—½ì„œì¹´ë“œ",
    "productSize": "150x100mm [15.2 X 20.2]",
    "productionNumber": "30153892",
    "productionQuantity": "10 ë§¤",
    "note": "",
    "options": {
      "option1": "ë‘ë°ë·° 240g",
      "option2": "í°ìƒ‰ ë¬´ì§€ë´‰íˆ¬(165x115mm)",
      "option3": "-",
      "option4": "50",
      "option5": "-",
      "option6": "-",
      "option7": "-"
    },
    "printDate": "2025ë…„ 10ì›” 12ì¼ ì˜¤í›„ 11:16:38",
    "printedBy": "ì–´ë“œë¯¼(admin)"
  }
}
```

### 3. ì œì‘ ì˜ë¢°ì„œ ìƒì„± (í…ŒìŠ¤íŠ¸ìš©)

```http
POST /api/job-orders/:id
Content-Type: application/json

{
  "documentNumber": "202510-TEST-00001_00",
  "orderNumber": "8360001",
  ...
}
```

## ğŸš€ ì‚¬ìš© ë°©ë²•

### 1. ê°œë°œ ì„œë²„ ì‹¤í–‰

```bash
npm run dev
```

### 2. í˜ì´ì§€ ì ‘ì†

#### í…ŒìŠ¤íŠ¸ ë¦¬í¬íŠ¸ í˜ì´ì§€
```
http://localhost:3000/test-report
```

#### API ë¬¸ì„œ (Swagger UI)
```
http://localhost:3000/api-docs
```

#### API ë¬¸ì„œ (Scalar - í˜„ëŒ€ì  ë””ìì¸)
```
http://localhost:3000/api-docs-scalar
```

#### API ìŠ¤í™ (JSON)
```
http://localhost:3000/api/swagger
```

### 3. ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸

1. **ëª©ë¡ ì„ íƒ**: ë“œë¡­ë‹¤ìš´ì—ì„œ ì œì‘ ì˜ë¢°ì„œ ì„ íƒ
2. **ë°ì´í„° ë¡œë”©**: ì„ íƒí•œ ì˜ë¢°ì„œì˜ ìƒì„¸ ì •ë³´ê°€ ìë™ìœ¼ë¡œ ë¡œë”©ë¨
3. **ë¦¬í¬íŠ¸ í™•ì¸**: í™”ë©´ì— ì‹¤ì œ ì œì‘ ì˜ë¢°ì„œ í˜•íƒœë¡œ í‘œì‹œ
4. **PDF ë‹¤ìš´ë¡œë“œ**: "PDF ë‹¤ìš´ë¡œë“œ" ë²„íŠ¼ í´ë¦­

## ğŸ“Š API ë¬¸ì„œ ë„êµ¬ ë¹„êµ

ë‘ ê°€ì§€ API ë¬¸ì„œ ë„êµ¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤:

| ê¸°ëŠ¥ | Swagger UI | Scalar API Reference |
|------|------------|---------------------|
| **ë””ìì¸** | ì „í†µì  | í˜„ëŒ€ì , ì„¸ë ¨ë¨ |
| **React 19 í˜¸í™˜** | ê²½ê³  ìˆìŒ (í•„í„°ë§ ì²˜ë¦¬) | ì™„ë²½ í˜¸í™˜ |
| **ì¸ê¸°ë„** | â­â­â­â­â­ (ì—…ê³„ í‘œì¤€) | â­â­â­â­ (ì‹ ê·œ) |
| **API í…ŒìŠ¤íŠ¸** | âœ… Try it out | âœ… ì¸í„°ë™í‹°ë¸Œ í…ŒìŠ¤íŠ¸ |
| **ì½”ë“œ ì˜ˆì‹œ** | âœ… cURLë§Œ | âœ… ë‹¤ì–‘í•œ ì–¸ì–´ |
| **ë‹¤í¬ ëª¨ë“œ** | âŒ | âœ… |
| **ê²€ìƒ‰** | âœ… | âœ… í–¥ìƒë¨ |
| **URL** | `/api-docs` | `/api-docs-scalar` |

**ê¶Œì¥:** ë‘ ê°€ì§€ ëª¨ë‘ ì‚¬ìš© ê°€ëŠ¥í•˜ë©°, ì·¨í–¥ì— ë”°ë¼ ì„ íƒí•˜ì„¸ìš”!

## ğŸ§ª API í…ŒìŠ¤íŠ¸

### Swagger UIë¡œ í…ŒìŠ¤íŠ¸

1. ë¸Œë¼ìš°ì €ì—ì„œ `http://localhost:3000/api-docs` ì ‘ì†
2. API ì—”ë“œí¬ì¸íŠ¸ ì„ íƒ
3. "Try it out" í´ë¦­
4. íŒŒë¼ë¯¸í„° ì…ë ¥
5. "Execute" í´ë¦­
6. ì‘ë‹µ í™•ì¸

### curlë¡œ í…ŒìŠ¤íŠ¸

```bash
# ëª©ë¡ ì¡°íšŒ
curl http://localhost:3000/api/job-orders

# ìƒì„¸ ì¡°íšŒ
curl http://localhost:3000/api/job-orders/1

# ìƒˆ ë°ì´í„° ì¶”ê°€ (POST)
curl -X POST http://localhost:3000/api/job-orders/1 \
  -H "Content-Type: application/json" \
  -d '{
    "documentNumber": "202510-TEST-00001_00",
    "orderNumber": "8360001",
    "clientName": "í…ŒìŠ¤íŠ¸ ê³ ê°",
    ...
  }'
```

### Postman/Insomniaë¡œ í…ŒìŠ¤íŠ¸

**OpenAPI ìŠ¤í™ ê°€ì ¸ì˜¤ê¸°:**
1. Import â†’ URL
2. `http://localhost:3000/api/swagger` ì…ë ¥
3. ìë™ìœ¼ë¡œ ëª¨ë“  ì—”ë“œí¬ì¸íŠ¸ ìƒì„±ë¨

**ìˆ˜ë™ìœ¼ë¡œ í…ŒìŠ¤íŠ¸:**
1. ìƒˆ ìš”ì²­ ìƒì„±
2. Method: GET
3. URL: `http://localhost:3000/api/job-orders/1`
4. Send í´ë¦­

## ğŸ“¦ Mock ë°ì´í„°

í˜„ì¬ 3ê°œì˜ ìƒ˜í”Œ ë°ì´í„°ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤:

- **ID 1**: BIZ - 2ë‹¨ì ‘ì§€ì¹´ë“œ
- **ID 2**: ì‰¬ì‡í¬ë£¨ - ëª…í•¨
- **ID 3**: ì£¼ì‹íšŒì‚¬ í…Œí¬ë…¸ - í¬ìŠ¤í„°

Mock ë°ì´í„°ëŠ” `src/app/api/job-orders/[id]/route.ts`ì—ì„œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ğŸ”§ ì»¤ìŠ¤í„°ë§ˆì´ì§•

### ìƒˆ ì œì‘ ì˜ë¢°ì„œ ì¶”ê°€

`src/app/api/job-orders/[id]/route.ts` íŒŒì¼ì˜ `mockDatabase` ê°ì²´ì— ì¶”ê°€:

```typescript
const mockDatabase: Record<string, JobOrderData> = {
  "1": { /* ê¸°ì¡´ ë°ì´í„° */ },
  "2": { /* ê¸°ì¡´ ë°ì´í„° */ },
  "4": {
    documentNumber: "202510-NEW-00001_00",
    orderNumber: "8361111",
    // ... ë‚˜ë¨¸ì§€ í•„ë“œ
  },
};
```

### ë¦¬í¬íŠ¸ ë ˆì´ì•„ì›ƒ ìˆ˜ì •

`src/app/test-report/components/JobOrderReportView.tsx` íŒŒì¼ì„ ìˆ˜ì •í•˜ì—¬ ë ˆì´ì•„ì›ƒì„ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ğŸ¨ ì£¼ìš” ê¸°ëŠ¥

### 1. ë™ì  ë°”ì½”ë“œ/QRì½”ë“œ ìƒì„±

- **QRì½”ë“œ**: ë¬¸ì„œë²ˆí˜¸ë¥¼ QRì½”ë“œë¡œ ìë™ ìƒì„± (react-qr-code)
- **1D ë°”ì½”ë“œ**: ì£¼ë¬¸ë²ˆí˜¸ë¥¼ CODE128 ë°”ì½”ë“œë¡œ ìƒì„± (react-barcode)

### 2. PDF ìƒì„±

- **A4 í¬ê¸°**: 210mm x 297mm
- **ê³ í•´ìƒë„**: scale=2ë¡œ ì„ ëª…í•œ ì¶œë ¥
- **ë‹¤ì¤‘ í˜ì´ì§€**: ê¸´ ì½˜í…ì¸  ìë™ í˜ì´ì§€ ë¶„í• 

### 3. API í†µí•©

- **RESTful API**: í‘œì¤€ HTTP ë©”ì„œë“œ ì‚¬ìš©
- **íƒ€ì… ì•ˆì „ì„±**: TypeScript íƒ€ì… ì •ì˜
- **ì—ëŸ¬ ì²˜ë¦¬**: ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ë° 404 ì²˜ë¦¬

## ğŸ” íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### API í˜¸ì¶œ ì‹¤íŒ¨

```
Error: Failed to fetch
```

**í•´ê²°**: ê°œë°œ ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸í•˜ì„¸ìš”.

```bash
npm run dev
```

### PDF ìƒì„± ì‹¤íŒ¨

```
Error: Attempting to parse an unsupported color function 'oklch'
```

**í•´ê²°**: `JobOrderReportView.tsx`ì—ì„œ ëª¨ë“  ìŠ¤íƒ€ì¼ì´ ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ë¡œ ì‘ì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”. Tailwind í´ë˜ìŠ¤ëŠ” ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”.

### ë°”ì½”ë“œ/QRì½”ë“œê°€ ë³´ì´ì§€ ì•ŠìŒ

**í•´ê²°**: `react-barcode`ì™€ `react-qr-code` ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì—ˆëŠ”ì§€ í™•ì¸:

```bash
npm install react-barcode react-qr-code
```

## ğŸ“š ì°¸ê³  ìë£Œ

- [Next.js App Router - Route Handlers](https://nextjs.org/docs/app/building-your-application/routing/route-handlers)
- [OpenAPI Specification](https://swagger.io/specification/)
- [Swagger UI](https://swagger.io/tools/swagger-ui/)
- [swagger-jsdoc](https://github.com/Surnet/swagger-jsdoc)
- [html2canvas](https://html2canvas.hertzen.com/)
- [jsPDF](https://github.com/parallax/jsPDF)
- [react-qr-code](https://www.npmjs.com/package/react-qr-code)
- [react-barcode](https://www.npmjs.com/package/react-barcode)

## ğŸš§ í–¥í›„ ê°œì„  ì‚¬í•­

- [ ] ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™ (PostgreSQL/MongoDB)
- [ ] ì¸ì¦/ê¶Œí•œ ì¶”ê°€
- [ ] ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥
- [ ] ì œì‘ ì˜ë¢°ì„œ ìƒì„±/ìˆ˜ì •/ì‚­ì œ UI
- [ ] ë‹¤êµ­ì–´ ì§€ì› (i18n)
- [ ] PDF í…œí”Œë¦¿ ì»¤ìŠ¤í„°ë§ˆì´ì§•
- [ ] ì´ë©”ì¼ ë°œì†¡ ê¸°ëŠ¥
